{% extends 'base-evaluation.html' %}
{% load static %}
{% load add_attr %}
{% load i18n %}

{% block content %}

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li class="alert-warning ">{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<div class="row two-columns-adapted">
    <div class="column center-content">
        <h1 class="center">Substra Assessment</h1>
        <p class="margin-50">{% blocktrans trimmed %}
            Are you interested in the notion of responsible and trustworthy data science
            practices? Substra Assessment is a self-assessment and training tool: assess your organisation's level
            of maturity now and access numerous technical references to increase your competence.
            {% endblocktrans %}
        </p>
        <div class="row">
            {% if user.is_authenticated %}
            <a class="btn btn-primary margin-auto margin-50" href="{% url 'home:user-profile' %}">
                {% trans "My dashboard" %}</a>
            {% else %}
            <a class="btn btn-primary margin-auto" href="{% url 'home:signup' %}">{% trans "Sign up and start an evaluation" %}</a>
            {% endif %}
        </div>
    </div>
    <div class="column remove-smartphone-screen margin-auto">
        <img alt="image" class="img-fluid d-block mx-auto image-max-350" src="{% static 'image/Illustration_3.png' %}">
    </div>
</div>

<div class="homepage-banner margin-50">
    {% trans "Responsible and Trustworthy Data Science: towards a reference framework and a professional community" %}
</div>

<div class="row two-columns-adapted under-homepage-banner">
    <div class="column center-content">
        <img alt="image" class="img-fluid d-block mx-auto margin-50 image-max-350"
             src="{% static 'image/Illustration_10.png' %}">
        <p class="margin-150">
            {% blocktrans trimmed %}
            New technical and organisational solutions are essential to provide a framework
            of trust that is lacking today and to make possible new, promising and secure collaborations between
            companies, public institutions and citizens.
            {% endblocktrans %}
        </p>
        <img alt="image"
             class="img-fluid d-block mx-auto margin-50 image-max-350"
             src="{% static 'image/Illustration_1.png' %}">
    </div>
    <div class="column center-content">
        <p class="margin-50">
            {% blocktrans trimmed %}
            A new territory is emerging at the crossroads between the AI expansion in
            organisations and public concerns about private data, transparency and robustness of algorithms. These are
            two powerful trends that are already beginning to collide. How can they be reconciled and combined
            together?
            {% endblocktrans %}
        </p>
        <img alt="image" class="img-fluid d-block mx-auto margin-150 image-max-350"
             src="{% static 'image/Illustration_7.png' %}">
        <p class="margin-150">
            {% blocktrans trimmed %}
            Based on an open and participative approach that we initiated in mid-2019 and
            described in
            {% endblocktrans %}
            <a href="{% trans 'https://www.substra.ai/en/blog/how-to-solve-the-tension-between-ai-potential-and-associated-concerns' %}"
               target="_blank">
                {% trans "this article," %}
            </a>
            {% blocktrans trimmed %}
            we have developed a reference framework to promote responsible and trustworthy data
            science. It has given rise to a self-assessment
            tool accompanied by numerous technical resources.
            {% endblocktrans %}
        </p>
    </div>
</div>

<div class="homepage-banner margin-50">
    {% trans "Assess the level of maturity of your organisation and select topics for further study" %}
</div>

<div class="row under-homepage-banner three-columns">
    <div class="column">
        <img alt="image" class="centered-image middle-width" src="{% static 'image/picto_homepage_rose.png' %}">
        <p class="text-center"><strong>{% trans "Evaluate your organisation" %}</strong></p>
        <p class="center">{% trans "Carry out your self-assessment on the 6 themes of Responsible Data Science and Trust" %}
        </p>

    </div>
    <div class="column">
        <img alt="image" class="centered-image middle-width" src="{% static 'image/picto_homepage_bleu.png' %}">
        <p class="text-center"><strong>{% trans "Technical resources" %}</strong></p>
        <p class="center">
            {% blocktrans trimmed %}
            Discover the resources that will allow you to progress, discover new tools and learn new techniques.
            {% endblocktrans %}
        </p>
    </div>
    <div class="column">
        <img alt="image" class="centered-image middle-width" src="{% static 'image/picto_homepage_vert.png' %}">
        <p class="text-center"><strong>{% trans "Your score" %}</strong></p>
        <p class="center">{% trans "Analyse your progress over time on the different assessment axes" %}</p>
    </div>

</div>

<div class="row">
    {% if user.is_authenticated %}
    <a class="btn btn-primary margin-auto" href="{% url 'home:user-profile' %}">{% trans "My dashboard" %}</a>
    {% else %}
    <a class="btn btn-primary margin-auto" href="{% url 'home:signup' %}">{% trans "Sign up and start an evaluation" %}</a>
    {% endif %}
</div>

<div id="mc_embed_signup" class="newsletter-form-container margin-auto">
    <form action="https://substra.us18.list-manage.com/subscribe/post-json?u=385fa3f9736ea94a1fcca969f&id=a80365310d"
          method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form"
          class="validate form-center" target="_blank" novalidate >
        <div id="mc_embed_signup_scroll" class="centered">
            <label for="mce-EMAIL"
                   class="newsletter-label">{% trans "Sign up to receive Substra Foundationâ€™s newsletter:" %}</label>
            <div id="divErrorsNewsletter" class="field-error">
                <p id="errorMailEmpty" class="display-none">{% trans "Email Address is required." %}</p>
                <p id="errorMailFormat"
                   class="display-none">{% trans "Email addresses should follow the format user@domain.com." %}</p>
                <p id="errorInvalidMail"
                   class="display-none">{% trans "This email address looks fake or invalid. Please enter a real email address." %}</p>
                <p id="errorServerUnavailable" class="display-none">{% trans "Could not connect to the registration server, retry later." %}</p>
            </div>
            <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email address"
                   required>
            <div class="out-of-screen" aria-hidden="true">
                <input type="text" name="b_385fa3f9736ea94a1fcca969f_a80365310d" tabindex="-1" value=""></div>
            <div class="newsletter-submit-container">
                <input type="submit" value="{% trans 'SIGN UP' %}" name="subscribe" id="mc-embedded-subscribe"
                       class="btn btn-submit-newsletter"></div>
            <div class="newsletter-form-footnote">
                <p>{% trans "Frequency: maximum 1 email/month. Your email address will not be shared with anyone." %}</p>
            </div>
        </div>
    </form>
    <p id="confirmSubscribe" class='newsletter-confirmation-text display-none'>{% trans "Thank you for subscribing to the newsletter!" %}</p>
    <p id="errorAlreadySubscribed" class='newsletter-confirmation-text display-none'>{% trans "You are already subscribed!" %}</p>
</div>

<script>

function registerNewsletter(event) {
    event.preventDefault();

    this._form = this.querySelector("form");
    this._action = this._form.getAttribute("action");
    this._input = encodeURIComponent(this._form.querySelector("input.email").value);
    document.MC_callback = function(response) {
        if (response) {
            //if mailChimp does not return "succes" -> display an error message
            //else: hide form and display a confirmation message
            let errorNum;
            if (response.result != "success") {
                //regroup mailChimp errors into 4 differents errors
                //if the '0' is not present it means that the mail adress is already subscribed
                if (response.msg[0] != '0') {
                    errorNum = "alreadySub";
                } else {
                    let errorsReceivedRedirect = {
                        "0 - Please enter a value": "empty",
                        "0 - An email address must contain a single @": "format",
                        "0 - The domain portion of the email address is invalid (the portion after the @: )": "format",
                        "0 - The username portion of the email address is empty": "format",
                        "0 - This email address looks fake or invalid. Please enter a real email address.": "invalid",
                    }
                    errorNum = errorsReceivedRedirect[response.msg];
                }

                let displayError = {
                    'empty': function () {
                        document.getElementById('errorMailEmpty').classList.remove("display-none");
                    },
                    'format': function () {
                        document.getElementById('errorMailFormat').classList.remove("display-none");
                    },
                    'invalid': function () {
                        document.getElementById('errorInvalidMail').classList.remove("display-none");
                    },
                    'alreadySub': function () {
                        document.getElementById('mc_embed_signup').querySelector('form').remove();
                        document.getElementById('errorAlreadySubscribed').classList.remove("display-none");
                    }
                }
                displayError[errorNum]();
            } else {
                // Success
                document.getElementById('mc_embed_signup').querySelector('form').remove();
                document.getElementById('confirmSubscribe').classList.remove('display-none');
            }
        } else {
            document.getElementById('errorServerUnavailable').classList.remove("display-none");
        }
    }

    // generate script
    this._script = document.createElement("script");
    this._script.type = "text/javascript";
    this._script.src = this._action + "&c=document.MC_callback&EMAIL=" + this._input;

    // append script to head
    document.getElementsByTagName("head")[0].appendChild(this._script);
}

var newsletter = document.querySelector("#mc_embed_signup")
newsletter.addEventListener("submit", registerNewsletter);

</script>

{% endblock %}
